---
title: (ブログ v6.0.0) 関連記事を追加した
created_at: 2021-03-07
categories: 技術
tags: ブログ
---

Google アナリティクスを眺めていると、改善できそうな指標があることに気づきました。
その指標はセッション辺りのページ閲覧数・平均セッション時間・直帰率ですが、それぞれの指標を出すと次の通りになります。

| 指標                         | 直近 7 日の平均 |
| ---------------------------- | --------------- |
| セッション辺りのページ閲覧数 | 1.17            |
| 平均セッション時間           | 00:00:26        |
| 直帰率                       | 90.75%          |

まあ悪そうな値ということが分かります。
この原因として、記事を読み終わったあとに他のページへ遷移するリンクがタグぐらいしかなく、記事を読み終わった後はそのままタブを閉じてしまうからという仮説を立てました。

なので何かしらのリンク一覧を提供して、記事を読み終わった後に他のページへ遷移してもらえば先ほど挙げた指標が改善するのではないかというのが、今回の背景となります。

## 関連記事を表示するようにしてみた

ということで、各記事の下部に関連する記事の一覧を載せるようにしてみました。

実装は[blog.kubosho.com/relatedEntryList.ts](https://github.com/kubosho/blog.kubosho.com/blob/master/src/entry/relatedEntryList.ts)にありますが、軽く説明すると記事に付けられたタグとカテゴリーを元に、同じタグやカテゴリーの記事を最大 5 件返します。

タグのほうを優先したのは、このブログにおけるカテゴリーは割とざっくりした分類になっているので、タグのほうがより関連する記事が表示されるのではないかと考えたためです。

## 実際に表示されている様子

[Twitter の右サイドバーを非表示にする](https://blog.kubosho.com/entry/remove-twitter-trend)では CSS 関連の記事が良い感じに表示されているはずです。

![記事の下に表示されている関連記事の一覧](https://blog-assets.kubosho.com/related_entry_list.png)

記事によってはあまり関連してなさそうな記事が表示される場合もあります。
たとえば[WH-1000XM4 を買うかどうか迷っている人は今すぐ買おう](https://blog.kubosho.com/entry/wh-1000xm4-review)という記事で表示されている関連記事は、ヘッドホンのレビューという内容からするとあまり関連してない記事が出ています。

![ヘッドホンのレビュー記事だが、関連記事はF1について語った記事やAtomic Designに関する記事など関係なさそうなものが表示されている](https://blog-assets.kubosho.com/related_entry_list_2.png)

この辺はタグの付け方を工夫するなどして、改善していきたいと思っています。

## 余談: Google アナリティクスのオプトアウトについて

ちなみに、このブログを見ているときに Google アナリティクスによる解析をされたくないという人は、[ポリシー](https://blog.kubosho.com/policy)内の「Google アナリティクスによる解析のオプトアウト」からオプトアウトできます。
「オプトアウトの有効化」というボタンを押して、次の文言がボタンの下に表示されていれば、Google アナリティクスによる解析はされないようにしています。

> オプトアウトが有効になっています。
> Google アナリティクスによるアクセス解析はおこなわれません。
