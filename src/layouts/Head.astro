---
import { SITE_URL } from '../../constants/siteData';
import BaseMetadata from '../components/BaseMetadata.astro';
import ExternalResourceLink from '../components/ExternalResourceLink.astro';
import { retrieveTranslation } from '../features/locales/i18n';

interface Props {
  title?: string;
  description?: string;
  pageUrl?: string;
  pageType?: 'article' | 'website';
  ogImageUrl?: string;
}

const { title: pageTitle, description: pageDescription, pageType, pageUrl, ogImageUrl: ogImage } = Astro.props;

const blogTitle = retrieveTranslation('website.title');
const blogDescription = retrieveTranslation('website.description');

const title = pageTitle === '' || pageTitle == null ? blogTitle : `${pageTitle} | ${blogTitle}`;
const description = pageDescription === '' || pageDescription == null ? blogDescription : pageDescription;
const url = pageUrl === '' || pageUrl == null ? SITE_URL : pageUrl;
---

<head>
  <BaseMetadata title={title} description={description} pageType={pageType} pageUrl={url} ogImageUrl={ogImage} />
  <slot />
  <ExternalResourceLink />
</head>
