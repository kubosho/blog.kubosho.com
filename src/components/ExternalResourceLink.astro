---
import { pathList } from '../../constants/path_list';
import { FAVICON_URL } from '../../constants/site_data';
import { GTM_ID } from '../tracking/gtm_id';
import { retrieveTranslation } from '../locales/i18n';

interface Props {
  canonicalUrl: string;
}

const { canonicalUrl } = Astro.props;

const gtmUrl = `https://www.googletagmanager.com/gtm.js?id=${GTM_ID}`;
const webSiteTitle = retrieveTranslation('website.title');
---

<link rel="canonical" href={canonicalUrl} />
<link rel="apple-touch-icon" href={FAVICON_URL} />
<link rel="icon" type="image/png" href={FAVICON_URL} />
<link rel="alternate" type="application/atom+xml" href={pathList.feed} title={webSiteTitle} />
<link rel="preload" as="style" href="/assets/styles/color_scheme.css" />
<link rel="preload" as="script" href={gtmUrl} />
<link rel="stylesheet" href="/assets/styles/foundation.css" />
<link rel="stylesheet" href="/assets/styles/variables.css" />
<link rel="stylesheet" href="/assets/styles/main.css" />
<script src={gtmUrl} defer></script>
<script>
  import { analyticsOptout } from '../stores/analyticsOptoutStore';

  const isAnalyticsOptoutEnabled = analyticsOptout.enabled();
  if (!isAnalyticsOptoutEnabled) {
    import('../tracking/data_layer');
  }
</script>
